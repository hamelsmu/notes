<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="search" type="application/opensearchdescription+xml" title="Hamel&#39;s Notes" href="/opensearch.xml"><title data-rh="true">Cookbook | Hamel&#x27;s Notes</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://notes.hamel.dev/linux/cookbook"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cookbook | Hamel&#x27;s Notes"><meta data-rh="true" name="description" content="You should browse the table of contents of this book and use the shell scripts contained within off the shelf if possible."><meta data-rh="true" property="og:description" content="You should browse the table of contents of this book and use the shell scripts contained within off the shelf if possible."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://notes.hamel.dev/linux/cookbook"><link data-rh="true" rel="alternate" href="https://notes.hamel.dev/linux/cookbook" hreflang="en"><link data-rh="true" rel="alternate" href="https://notes.hamel.dev/linux/cookbook" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RAKQU13XWU-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.26e1ccdb.css">
<link rel="preload" href="/assets/js/runtime~main.3516e337.js" as="script">
<link rel="preload" href="/assets/js/main.060f4db6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Notes</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_Pssr toggle_TdHA toggleChecked_cnQY toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" checked="" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently dark mode)"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Hamel&#x27;s Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/concurrency">Python Concurrency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/marc_demo">Demo for mark</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/actions/">actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;actions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docker/Docker-In-Action">docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/fastai/fundamentals">fastai</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/how-to-learn/lhtl">how-to-learn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/jupyter/remote_browser">jupyter</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/linux/">linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;linux&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/bash_scripting">Cheatsheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/linux/cookbook">Cookbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/misc_utils">Misc Utilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/osx">OSX Shell Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/linux/permprocdata">Processes, Permissions and Moving Data</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pandoc/filters">pandoc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/programming-languages/pl">programming-languages</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/linux/">linux</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/linux/cookbook">Cookbook</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>A Cookbook of Shell Scripts - Wicked Shell Scripts, 2d Edition</h1><p>You should browse the table of contents of <a href="https://nostarch.com/wcss2" target="_blank" rel="noopener noreferrer">this book</a> and use the shell scripts contained within off the shelf if possible.  </p><ul><li>GitHub: <a href="https://github.com/hamelsmu/wicked_cool_shell_scripts_2e/" target="_blank" rel="noopener noreferrer">https://github.com/hamelsmu/wicked_cool_shell_scripts_2e/</a></li><li>Link to book on GitHub:  <a href="https://github.com/hamelsmu/wicked_cool_shell_scripts_2e/blob/master/WickedCoolShellScripts2E.pdf" target="_blank" rel="noopener noreferrer">https://github.com/hamelsmu/wicked_cool_shell_scripts_2e/blob/master/WickedCoolShellScripts2E.pdf</a></li><li>Book: <a href="https://nostarch.com/wcss2" target="_blank" rel="noopener noreferrer">https://nostarch.com/wcss2</a></li></ul><h1>Things Learned From The Cookbook</h1><p>In addition to just using the library of shell scripts,  I also learned the following bash tidbits from this book.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="shift--and---pop-args-off-and-count-args"><code>shift</code>  and <code>$#</code>  pop args off and count args<a class="hash-link" href="#shift--and---pop-args-off-and-count-args" title="Direct link to heading">â€‹</a></h2><p>shift.sh</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">while (( $# )); do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo &quot;process args: $1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    shift</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Results in:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./shift.sh foo bar bash                                                                             </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process args: foo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process args: bar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process args: bash</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-shift-for-cli-options">Using shift for CLI options:<a class="hash-link" href="#using-shift-for-cli-options" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># newquota--A frontend to quota that works with full-word flags a la GNU</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># quota has three possible flags, -g, -v, and -q, but this script</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#   allows them to be &#x27;--group&#x27;, &#x27;--verbose&#x27;, and &#x27;--quiet&#x27; too:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">flags=&quot;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">realquota=&quot;$(which quota)&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">while [ $# -gt 0 ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  case $1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --help)  echo &quot;Usage: $0 [--group --verbose --quiet -gvq]&quot; &gt;&amp;2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                       exit 1 ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --group )  flags=&quot;$flags -g&quot;;       shift ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --verbose)  flags=&quot;$flags -v&quot;;   shift ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --quiet)  flags=&quot;$flags -q&quot;;       shift ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --)  shift;           break ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    *)  break;          # done with &#x27;while&#x27; loop!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exec $realquota $flags &quot;$@&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="-collect-all-arguments"><code>$*</code> collect all arguments<a class="hash-link" href="#-collect-all-arguments" title="Direct link to heading">â€‹</a></h2><p>shift2.sh</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for var in $*; do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo $var</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Results in:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./shift2.sh foo bar bash                                                                             </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process args: foo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process args: bar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process args: bash</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="multi-option-case-statement">Multi Option Case Statement<a class="hash-link" href="#multi-option-case-statement" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">while read command args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  case $command</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    quit|exit) exit 0                                  ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    help|\?)   show_help                               ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    scale)     scale=$args                             ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    *)         scriptbc -p $scale &quot;$command&quot; &quot;$args&quot;  ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  /bin/echo -n &quot;calc&gt; &quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="another-example-of-case-statement">Another example of case statement<a class="hash-link" href="#another-example-of-case-statement" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  case $1 in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    1 ) month=&quot;Jan&quot;    ;;  2 ) month=&quot;Feb&quot;    ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    3 ) month=&quot;Mar&quot;    ;;  4 ) month=&quot;Apr&quot;    ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    5 ) month=&quot;May&quot;    ;;  6 ) month=&quot;Jun&quot;    ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    7 ) month=&quot;Jul&quot;    ;;  8 ) month=&quot;Aug&quot;    ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    9 ) month=&quot;Sep&quot;    ;;  10) month=&quot;Oct&quot;    ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    11) month=&quot;Nov&quot;    ;;  12) month=&quot;Dec&quot;    ;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    * ) echo &quot;$0: Unknown numeric month value $1&quot; &gt;&amp;2; exit 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  esac</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="collecting-stdout-with--">Collecting stdout with <code>-</code><a class="hash-link" href="#collecting-stdout-with--" title="Direct link to heading">â€‹</a></h2><p><code>echo &quot;Enter something: &quot; | cat -</code></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="formatting-long-lines-fmt">Formatting Long Lines <code>fmt</code><a class="hash-link" href="#formatting-long-lines-fmt" title="Direct link to heading">â€‹</a></h2><p>Will make lines no longer than 30 characters, not cutting off any words.</p><p><code>fmt -w30 long_text.txt</code></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ifs---internal-field-seperator">IFS - Internal Field Seperator<a class="hash-link" href="#ifs---internal-field-seperator" title="Direct link to heading">â€‹</a></h2><p>Sets the internal delimiter</p><p>ifs_variable.sh</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">IFS=&quot;:&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">var=&#x27;a:b-c~d&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for n in $var</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    echo &quot;$n&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Results in </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./1/ifs_variable.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b-c~d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ifs-in-great-expectations-action">IFS in Great Expectations Action<a class="hash-link" href="#ifs-in-great-expectations-action" title="Direct link to heading">â€‹</a></h3><p>I&#x27;m using this in the <a href="https://github.com/superconductive/great_expectations_action" target="_blank" rel="noopener noreferrer">Great Expectations Action</a> to parse a list of arguments given as a string to an input</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Loop through checkpoints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">STATUS</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:rgb(189, 147, 249);font-style:italic">IFS</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;,&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(189, 147, 249);font-style:italic">c</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$INPUT_CHECKPOINTS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Validating Checkpoint: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${c}</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain"> great_expectations checkpoint run </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">STATUS</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ifs-for-iterating-through-path">IFS for iterating through $PATH<a class="hash-link" href="#ifs-for-iterating-through-path" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">IFS=&quot;:&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for directory in $PATH ; do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   echo $directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="ifs-double-vs-single-quotes">IFS: Double vs. Single Quotes<a class="hash-link" href="#ifs-double-vs-single-quotes" title="Direct link to heading">â€‹</a></h3><p>With double quotes the outcome of the command expansion would be fed as one parameter to the source command. Without quotes it would be broken up into multiple parameters, depending on the value of IFS which contains space, TAB and newline by default.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">var=&quot;some value&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># $var fed into cmd as one parameter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmd &quot;$var&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># $var is fed into cmd as two parameters</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#  delimted by the default IFS character, space</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmd &#x27;$var&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="random">$RANDOM<a class="hash-link" href="#random" title="Direct link to heading">â€‹</a></h2><p><code>echo $RANDOM</code> will print out a random number</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="debugging-shell-scripts--x">Debugging Shell Scripts <code>-x</code><a class="hash-link" href="#debugging-shell-scripts--x" title="Direct link to heading">â€‹</a></h2><p>Debug a script:</p><p><code>bash -x myscript.sh</code></p><p>OR, within a script:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">set -x # start debugging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./myscript.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set +x # stop debugging</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>All variables will be substituted and lines that are run will be printed to screen, showing the control flow of the program</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sourcing-files-with--">Sourcing files with <code>. </code><a class="hash-link" href="#sourcing-files-with--" title="Direct link to heading">â€‹</a></h2><p>So you can &quot;import&quot; scripts</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">. myscript.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># is equivalent to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">source myscript.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="using-functions-to-set-exit-codes">Using functions to set exit codes<a class="hash-link" href="#using-functions-to-set-exit-codes" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">validAlphaNum()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Validate arg: returns 0 if all upper+lower+digits, 1 otherwise.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Remove all unacceptable chars.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  validchars=&quot;$(echo $1 | sed -e &#x27;s/[^[:alnum:]]//g&#x27;)&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if [ &quot;$validchars&quot; = &quot;$1&quot; ] ; then</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exit validAlphaNum</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="know-if-someone-running-the-script-directly-with--bash_source">Know if someone running the script directly with  <code>$BASH_SOURCE</code><a class="hash-link" href="#know-if-someone-running-the-script-directly-with--bash_source" title="Direct link to heading">â€‹</a></h2><p>The variable <code>$BASH_SOURCE</code> can let you differentiate between when a script is run standalone vs when its invoked from another script:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if [ &quot;$BASH_SOURCE&quot; = &quot;$0&quot; ]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="xargs"><code>xargs</code><a class="hash-link" href="#xargs" title="Direct link to heading">â€‹</a></h2><p><a href="https://www.cyberciti.biz/faq/linux-unix-bsd-xargs-construct-argument-lists-utility/" target="_blank" rel="noopener noreferrer">https://www.cyberciti.biz/faq/linux-unix-bsd-xargs-construct-argument-lists-utility/</a></p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; echo 1 2 3 4 | xargs -n2 -I {} echo hello {} world                                                                                                                                                                                                                                                   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hello 1 2 world</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hello 3 4 world</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.dev/hamelsmu/notes/blob/master/docs/linux/cookbook.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/linux/bash_scripting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cheatsheet</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/linux/misc_utils"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Misc Utilities</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#shift--and---pop-args-off-and-count-args" class="table-of-contents__link toc-highlight"><code>shift</code>  and <code>$#</code>  pop args off and count args</a><ul><li><a href="#using-shift-for-cli-options" class="table-of-contents__link toc-highlight">Using shift for CLI options:</a></li></ul></li><li><a href="#-collect-all-arguments" class="table-of-contents__link toc-highlight"><code>$*</code> collect all arguments</a></li><li><a href="#multi-option-case-statement" class="table-of-contents__link toc-highlight">Multi Option Case Statement</a><ul><li><a href="#another-example-of-case-statement" class="table-of-contents__link toc-highlight">Another example of case statement</a></li></ul></li><li><a href="#collecting-stdout-with--" class="table-of-contents__link toc-highlight">Collecting stdout with <code>-</code></a></li><li><a href="#formatting-long-lines-fmt" class="table-of-contents__link toc-highlight">Formatting Long Lines <code>fmt</code></a></li><li><a href="#ifs---internal-field-seperator" class="table-of-contents__link toc-highlight">IFS - Internal Field Seperator</a><ul><li><a href="#ifs-in-great-expectations-action" class="table-of-contents__link toc-highlight">IFS in Great Expectations Action</a></li><li><a href="#ifs-for-iterating-through-path" class="table-of-contents__link toc-highlight">IFS for iterating through $PATH</a></li><li><a href="#ifs-double-vs-single-quotes" class="table-of-contents__link toc-highlight">IFS: Double vs. Single Quotes</a></li></ul></li><li><a href="#random" class="table-of-contents__link toc-highlight">$RANDOM</a></li><li><a href="#debugging-shell-scripts--x" class="table-of-contents__link toc-highlight">Debugging Shell Scripts <code>-x</code></a></li><li><a href="#sourcing-files-with--" class="table-of-contents__link toc-highlight">Sourcing files with <code>. </code></a></li><li><a href="#using-functions-to-set-exit-codes" class="table-of-contents__link toc-highlight">Using functions to set exit codes</a></li><li><a href="#know-if-someone-running-the-script-directly-with--bash_source" class="table-of-contents__link toc-highlight">Know if someone running the script directly with  <code>$BASH_SOURCE</code></a></li><li><a href="#xargs" class="table-of-contents__link toc-highlight"><code>xargs</code></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get In Touch</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/HamelHusain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://hamel.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Hamel</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Hamel Husain</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3516e337.js"></script>
<script src="/assets/js/main.060f4db6.js"></script>
</body>
</html>