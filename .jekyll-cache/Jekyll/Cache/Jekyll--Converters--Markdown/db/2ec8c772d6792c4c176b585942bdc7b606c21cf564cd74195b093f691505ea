I"æ4<h1 id="bash-scripting-class-linux-academy">Bash Scripting Class Linux Academy</h1>
<ul>
  <li><a href="https://linuxacademy.com/linux/training/course/name/the-system-administrators-guidep-to-bash-scripting">Link</a> to class.</li>
  <li><a href="https://github.com/hamelsmu/bash_scripting">Link</a> to GitHub repo</li>
</ul>

<details open="">
  <summary class="text-delta">
    Table of contents
  </summary>
<ol id="markdown-toc">
  <li><a href="#bash-scripting-class-linux-academy" id="markdown-toc-bash-scripting-class-linux-academy">Bash Scripting Class Linux Academy</a>    <ol>
      <li><a href="#history-of-bash" id="markdown-toc-history-of-bash">History of Bash</a></li>
      <li><a href="#bash-configuration" id="markdown-toc-bash-configuration">Bash Configuration</a>        <ol>
          <li><a href="#bash_profile" id="markdown-toc-bash_profile">.bash_profile</a></li>
          <li><a href="#bashrc" id="markdown-toc-bashrc">.bashrc</a></li>
          <li><a href="#bash_history" id="markdown-toc-bash_history">.bash_history</a></li>
          <li><a href="#bash_logout" id="markdown-toc-bash_logout">.bash_logout</a></li>
        </ol>
      </li>
      <li><a href="#shell-scripts" id="markdown-toc-shell-scripts">Shell Scripts</a>        <ol>
          <li><a href="#chmod-ux" id="markdown-toc-chmod-ux">chmod u+x</a></li>
          <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
          <li><a href="#using-variables-on-the-command-line" id="markdown-toc-using-variables-on-the-command-line">Using Variables on The Command Line</a>            <ol>
              <li><a href="#using-substitution-with-backticks" id="markdown-toc-using-substitution-with-backticks">Using Substitution with backticks</a></li>
            </ol>
          </li>
          <li><a href="#using-variables-in-scripts" id="markdown-toc-using-variables-in-scripts">Using Variables in Scripts</a></li>
          <li><a href="#command-subsitution" id="markdown-toc-command-subsitution">Command Subsitution</a></li>
          <li><a href="#exit-status" id="markdown-toc-exit-status">Exit Status</a>            <ol>
              <li><a href="#using-exit-statues-in-a-shell-script" id="markdown-toc-using-exit-statues-in-a-shell-script">Using exit statues in a shell script</a></li>
            </ol>
          </li>
          <li><a href="#arithmetic-operations" id="markdown-toc-arithmetic-operations">Arithmetic Operations</a></li>
        </ol>
      </li>
      <li><a href="#global-and-local-environment-variables" id="markdown-toc-global-and-local-environment-variables">Global and Local Environment Variables</a>        <ol>
          <li><a href="#unset--delete-an-environment-variable" id="markdown-toc-unset--delete-an-environment-variable"><code class="highlighter-rouge">unset</code> : Delete An Environment Variable</a></li>
        </ol>
      </li>
      <li><a href="#special-characters-quotes--escapes" id="markdown-toc-special-characters-quotes--escapes">Special Characters: Quotes &amp; Escapes</a></li>
    </ol>
  </li>
  <li><a href="#redirecting-output" id="markdown-toc-redirecting-output">Redirecting Output</a>    <ol>
      <li><a href="#using-devnull" id="markdown-toc-using-devnull">Using dev/null</a></li>
      <li><a href="#redirect--std-error" id="markdown-toc-redirect--std-error">Redirect  Std Error</a></li>
      <li><a href="#redirect-std-out--err-into-one-file" id="markdown-toc-redirect-std-out--err-into-one-file">Redirect Std Out &amp; Err into one file</a></li>
      <li><a href="#dispose-std-err-output-devnull" id="markdown-toc-dispose-std-err-output-devnull">Dispose Std Err output <code class="highlighter-rouge">/dev/null</code></a></li>
    </ol>
  </li>
  <li><a href="#the-read-statement" id="markdown-toc-the-read-statement">The Read Statement</a></li>
  <li><a href="#shell-expansion" id="markdown-toc-shell-expansion">Shell Expansion</a>    <ol>
      <li><a href="#brace-expansion" id="markdown-toc-brace-expansion">Brace Expansion</a></li>
      <li><a href="#parameter-expansion-like-coalesce" id="markdown-toc-parameter-expansion-like-coalesce">Parameter Expansion, Like Coalesce</a></li>
    </ol>
  </li>
  <li><a href="#types-of-variables" id="markdown-toc-types-of-variables">Types of Variables</a>    <ol>
      <li><a href="#readonly-variables" id="markdown-toc-readonly-variables">Readonly Variables</a></li>
      <li><a href="#types-of-variables-1" id="markdown-toc-types-of-variables-1">Types of Variables</a></li>
    </ol>
  </li>
  <li><a href="#arrays" id="markdown-toc-arrays">Arrays</a>    <ol>
      <li><a href="#iterating-through-arrays" id="markdown-toc-iterating-through-arrays">Iterating Through Arrays</a></li>
      <li><a href="#passing-variables-to-scripts-at-the-command-line" id="markdown-toc-passing-variables-to-scripts-at-the-command-line">Passing Variables to Scripts at the Command Line</a></li>
    </ol>
  </li>
  <li><a href="#conditionals" id="markdown-toc-conditionals">Conditionals</a>    <ol>
      <li><a href="#the-if-statement" id="markdown-toc-the-if-statement">The if statement</a></li>
      <li><a href="#ifthenelse" id="markdown-toc-ifthenelse">If/Then/Else</a></li>
    </ol>
  </li>
  <li><a href="#conditional-expressions" id="markdown-toc-conditional-expressions">Conditional Expressions</a>    <ol>
      <li><a href="#file-expressions" id="markdown-toc-file-expressions">File Expressions</a></li>
      <li><a href="#string-expressions" id="markdown-toc-string-expressions">String Expressions</a></li>
      <li><a href="#integer-expressions" id="markdown-toc-integer-expressions">Integer Expressions</a></li>
    </ol>
  </li>
  <li><a href="#aside-output-streams" id="markdown-toc-aside-output-streams">Aside: Output Streams</a></li>
  <li><a href="#control-flow" id="markdown-toc-control-flow">Control Flow</a>    <ol>
      <li><a href="#for-loop" id="markdown-toc-for-loop">For Loop</a></li>
      <li><a href="#case-statement" id="markdown-toc-case-statement">Case Statement</a>        <ol>
          <li><a href="#match-multiple-case-statements" id="markdown-toc-match-multiple-case-statements">Match Multiple Case Statements</a></li>
        </ol>
      </li>
      <li><a href="#while-loop" id="markdown-toc-while-loop">While Loop</a></li>
      <li><a href="#asynchronous-execution-with-wait" id="markdown-toc-asynchronous-execution-with-wait">Asynchronous Execution with <code class="highlighter-rouge">wait</code></a></li>
      <li><a href="#short-circuit-expressions" id="markdown-toc-short-circuit-expressions">Short Circuit Expressions</a>        <ol>
          <li><a href="#-command1--command2" id="markdown-toc--command1--command2">&amp;&amp;: <code class="highlighter-rouge">command1 &amp;&amp; command2</code>:</a></li>
          <li><a href="#-command1--command2-1" id="markdown-toc--command1--command2-1">||: <code class="highlighter-rouge">command1 || command2</code>:</a></li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="#execution-operators" id="markdown-toc-execution-operators">Execution Operators</a></li>
  <li><a href="#inputoutput" id="markdown-toc-inputoutput">Input/Output</a>    <ol>
      <li><a href="#reading-files" id="markdown-toc-reading-files">Reading Files</a></li>
      <li><a href="#reading-files-with-loops" id="markdown-toc-reading-files-with-loops">Reading Files with loops</a></li>
      <li><a href="#file-descriptors" id="markdown-toc-file-descriptors">File Descriptors</a></li>
      <li><a href="#delimiters-ifs" id="markdown-toc-delimiters-ifs">Delimiters (IFS)</a></li>
      <li><a href="#traps-and-signals" id="markdown-toc-traps-and-signals">Traps and Signals</a></li>
    </ol>
  </li>
  <li><a href="#debugging-shell-scripts" id="markdown-toc-debugging-shell-scripts">Debugging Shell Scripts</a></li>
  <li><a href="#error-handling" id="markdown-toc-error-handling">Error Handling</a></li>
  <li><a href="#functions" id="markdown-toc-functions">Functions</a>    <ol>
      <li><a href="#structure-of-functions-in-a-shell-script" id="markdown-toc-structure-of-functions-in-a-shell-script">structure of functions in a shell script</a></li>
      <li><a href="#scope" id="markdown-toc-scope">Scope</a></li>
      <li><a href="#functions-with-parameters" id="markdown-toc-functions-with-parameters">Functions With Parameters</a></li>
      <li><a href="#nested-functions" id="markdown-toc-nested-functions">Nested Functions</a></li>
      <li><a href="#function-return-and-exit" id="markdown-toc-function-return-and-exit">Function Return and Exit</a></li>
    </ol>
  </li>
  <li><a href="#interactive-menus" id="markdown-toc-interactive-menus">Interactive Menus</a>    <ol>
      <li><a href="#infobox" id="markdown-toc-infobox">Infobox</a></li>
      <li><a href="#msgbox" id="markdown-toc-msgbox">Msgbox</a></li>
      <li><a href="#menus" id="markdown-toc-menus">Menus</a></li>
    </ol>
  </li>
</ol>

</details>

<h2 id="history-of-bash">History of Bash</h2>

<ul>
  <li>was originally a program called <code class="highlighter-rouge">bin/sh</code></li>
  <li>Bourne Shell: introduced more advanced structure into the shell.</li>
  <li><strong>Bourne Again Shell (Bash):</strong>  Second iteration of Bourne Shell.</li>
</ul>

<h2 id="bash-configuration">Bash Configuration</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nb">ls</span> <span class="nt">-a</span> ~/ | <span class="nb">grep </span>bash
    Ôíâ  .bash_history
    Ôíâ  .bash_profile
    ÔÖõ  .bash_profile.backup
    ÔÖõ  .bash_profile.bensherman
    ÔÖõ  .bash_profile_copy
    ÔÑï  .bash_sessions/
    Ôíâ  git-completion.bash
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="bash_profile">.bash_profile</h3>

<ul>
  <li><code class="highlighter-rouge">.bash_profile</code>: executed when you <code class="highlighter-rouge">login</code> -&gt; configures the shell when you get an initial command prompt.  This is different than <code class="highlighter-rouge">.bashrc</code>.</li>
  <li>
    <p>commonly loads the <code class="highlighter-rouge">~/.bashrc</code> file as well.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">bin</code> is traditionally the folder for binaries.</p>
  </li>
  <li><code class="highlighter-rouge">bash_profile</code> is designed to run when you login, so if you change it will not refresh until you login next time.</li>
</ul>

<h3 id="bashrc">.bashrc</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">.bashrc</code> it is executed simply before the command shell comes up, does not have to wait until you login.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">etc/bashrc</code> are system bashrc files which is like a ‚Äútemplate‚Äù for user bashrc files.  Anytime a new user is created, it inherits from this template and sometimes automated customizations are applied.  This is usually done by simply importing <code class="highlighter-rouge">etc/bashrc</code> from each user‚Äôs <code class="highlighter-rouge">bashrc</code> file.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">env</code> will list all env variables.</p>
  </li>
  <li>
    <p>to apply <code class="highlighter-rouge">.bashrc</code> you just have to run the command <code class="highlighter-rouge">bash</code> as it will start another shell from your current one.  However, if you run <code class="highlighter-rouge">bash</code> you can now <code class="highlighter-rouge">exit</code> without closing the shell, because a shell is running inside another shell.</p>
  </li>
</ul>

<h3 id="bash_history">.bash_history</h3>

<ul>
  <li><code class="highlighter-rouge">~/.bash_history</code> contains lots of history.  By default will only capture last 100 but you can change this setting.</li>
  <li>you can exlude something from saving to history (like passwords) by using an <code class="highlighter-rouge">ignorespace</code></li>
  <li>the environment variable <code class="highlighter-rouge">HIST_CONTROL</code> can be used to control how much history to keep and settings about what should not be logged.  One way to turn off loggin is:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>  <span class="nb">export </span><span class="nv">HISTCONTROL</span><span class="o">=</span><span class="nv">$HISTCONTROL</span>:ignorespace
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>this allow you to skip logging by adding a space to the the beginning of any command.  If you want to see what is in <code class="highlighter-rouge">HIST_CONTROL</code> you will see:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>  <span class="o">&gt;</span> <span class="nb">cat</span> ~/.bash_history | <span class="nb">grep </span>HISTCONTROL
  <span class="nv">HISTCONTROL</span><span class="o">=</span>ignoredups:ignorespace
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>ignoredups was already set to this variable.</p>
  </li>
</ul>

<h3 id="bash_logout">.bash_logout</h3>

<ul>
  <li>Doesn‚Äôt always exist on a system.  in most cases the contents of the <code class="highlighter-rouge">~/.bash_logout</code> will be empty or contain a comment.</li>
  <li>The role of this file is to execute things when you exit the shell.  If you close the shell it will <strong>not work</strong>, you have to do a <strong>clean exit</strong> instead.</li>
  <li>
    <p>Common use is to use this to clear out ~/.bashrc with the original to clear out any changes the user may have made.  You can accomplish this by copying a backup:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>  <span class="nb">cp</span> ~/.bashrc.original ~/.bashrc
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h2 id="shell-scripts">Shell Scripts</h2>

<p>Put your shell scripts in a folder you can find them.  We can put them in <code class="highlighter-rouge">~/bin</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>&gt; mkdir bin
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Make sure in <code class="highlighter-rouge">~/.bash_profile</code> you have:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HOME</span>/bin
<span class="nb">export </span>PATH
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="chmod-ux">chmod u+x</h3>

<ul>
  <li>To make <code class="highlighter-rouge">test.sh</code> executable run command <code class="highlighter-rouge">chmod u+x test.sh</code></li>
</ul>

<p>You can also run <code class="highlighter-rouge">chmod 755</code></p>

<h3 id="introduction">Introduction</h3>

<ul>
  <li>See <a href="Shell_Scripting.md">these notes</a> on what makes a shell script, accessing environment variables.</li>
</ul>

<h3 id="using-variables-on-the-command-line">Using Variables on The Command Line</h3>

<ul>
  <li>can use any name that is not an environment variable (check with <code class="highlighter-rouge">env</code>).</li>
  <li>by convention variable names in ALLCAPS.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>  <span class="o">&gt;</span> <span class="nv">FIRSTNAME</span><span class="o">=</span><span class="s2">"Hamel"</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>  - No space b/w = and value.
  - Good idea to __always__ put value in double quotes `"`, although this is not required in every case.  
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>As a practice you want to use <code class="highlighter-rouge">export</code> command to set is as an environment variable.  This makes the variable available to any subprocess that starts from the shell.  Read more about this <a href="https://stackoverflow.com/questions/1158091/defining-a-variable-with-or-without-export">here</a>.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>  <span class="o">&gt;</span> <span class="nb">export </span>FIRSTNAME
  <span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"Hello, </span><span class="nv">$FIRSTNAME</span><span class="s2">"</span>
  <span class="s2">"Hello Hamel"</span>

  <span class="o">&gt;</span> <span class="nb">export </span><span class="nv">FIRSTNAME</span><span class="o">=</span><span class="s2">"Hamel"</span> <span class="c"># do this in one step</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>The above example could work without <code class="highlighter-rouge">export</code>, too just reinforcing that its a good idea to use this as a habit.  You can do this in one step:</p>
  </li>
</ul>

<h4 id="using-substitution-with-backticks">Using Substitution with backticks</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">export </span><span class="nv">TODAYSDATE</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span>  <span class="c"># executes date command</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="using-variables-in-scripts">Using Variables in Scripts</h3>

<ul>
  <li>
    <p>Illustrative script <a href="varexample.sh">varexample.sh</a></p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>  <span class="nv">MYUSERNAME</span><span class="o">=</span><span class="s1">'hamel'</span>
  <span class="nv">MYPASSWORD</span><span class="o">=</span><span class="s1">'password'</span>
  <span class="nv">STARTOFSCRIPT</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span>

  <span class="nb">echo</span> <span class="s2">"My login name for this app is </span><span class="nv">$MYUSERNAME</span><span class="s2">"</span>
  <span class="nb">echo</span> <span class="s2">"My login password for this app is </span><span class="nv">$MYPASSWORD</span><span class="s2">"</span>
  <span class="nb">echo</span> <span class="s2">"I started this script at </span><span class="nv">$STARTOFSCRIPT</span><span class="s2">"</span>

  <span class="nv">ENDOFSCRIPT</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span>

  <span class="nb">echo</span> <span class="s2">"I ended the script at </span><span class="nv">$ENDOFSCRIPT</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>These variables only live within the sub-shell that executes the script.</p>
  </li>
</ul>

<h3 id="command-subsitution">Command Subsitution</h3>

<ul>
  <li><strong>Method 1 (Static)</strong>: Assign command result to variable.  Only runs the command at time of variable assignment.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>    <span class="nv">TODAYSDATE</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span>
    <span class="nv">USERFILES</span><span class="o">=</span><span class="sb">`</span>find /home <span class="nt">-user</span> user<span class="sb">`</span> <span class="c"># find all directories owned by the user "user"</span>

    <span class="nb">echo</span> <span class="s2">"Today's Date: </span><span class="nv">$TODAYSDATE</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"All files owned by USER: </span><span class="nv">$USERFILES</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong>Method 2</strong>: Use an alias, which allows you to run a command every time you call the alias. For aliases to work this way you must use the <strong>shopt</strong> command, which allows aliases to be useable in shell scripts.  Technically referred to as ‚Äúexpanding aliases within a subshell‚Äù.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>    <span class="c">#!/bin/bash</span>
    <span class="nb">shopt</span> <span class="nt">-s</span> expand_aliases

    <span class="c"># notice that we don't use backticks here because the command we want to execute is put in ".."</span>
    <span class="nb">alias </span><span class="nv">TODAY</span><span class="o">=</span><span class="s2">"date"</span> 
    <span class="nb">alias </span><span class="nv">UFILES</span><span class="o">=</span><span class="s2">"find /home -user user"</span>


    <span class="nv">A</span><span class="o">=</span><span class="sb">`</span>TODAY<span class="sb">`</span> <span class="c">#Executes the command date</span>
    <span class="nv">B</span><span class="o">=</span><span class="sb">`</span>UFILES<span class="sb">`</span><span class="c">#Executes the command </span>
    <span class="nb">echo</span> <span class="s2">"With Alias, TODAY is: </span><span class="nv">$A</span><span class="s2">"</span> <span class="nb">echo</span> <span class="s2">"With Alias, UFILES is: </span><span class="nv">$B</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="exit-status">Exit Status</h3>

<ul>
  <li>Value = 0 means everything is ok</li>
  <li>
    <p>Value != 0 means something is wrong.</p>
  </li>
  <li>See last exit status w/ the <code class="highlighter-rouge">$?</code> command:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>    <span class="o">&gt;</span> <span class="nb">ls</span>
    <span class="o">&gt;</span> <span class="nb">echo</span> <span class="nv">$?</span>
    0
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="using-exit-statues-in-a-shell-script">Using exit statues in a shell script</h4>

<ul>
  <li>Unlike python, shell scripts will continue executing even if there is an error.  You can prevent this by using <code class="highlighter-rouge">set -e</code></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>    <span class="nb">set</span> <span class="nt">-e</span> <span class="c"># means exit the shell if there is an error, don't continue.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="arithmetic-operations">Arithmetic Operations</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>    <span class="nb">expr </span>1 + 2
    <span class="nb">expr </span>2 <span class="se">\*</span> 2 <span class="c"># you have to escape the *</span>
    <span class="nb">expr</span> <span class="se">\(</span> 2 + 2 <span class="se">\)</span> <span class="se">\*</span> 4  <span class="c"># you must also escape the ( )</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Caveat: <strong>You need a space</strong> on each side of the operator.</li>
</ul>

<h2 id="global-and-local-environment-variables">Global and Local Environment Variables</h2>

<ul>
  <li><code class="highlighter-rouge">env</code> and <code class="highlighter-rouge">printenv</code> will tell you your global vars</li>
  <li>
    <p><code class="highlighter-rouge">set</code> will give you things from your session. This will also usually contain everything from your global scope.  <code class="highlighter-rouge">set</code> is a superset of <code class="highlighter-rouge">env</code>.</p>
  </li>
  <li>Reserved names: see study guide or google it.</li>
</ul>

<h3 id="unset--delete-an-environment-variable"><code class="highlighter-rouge">unset</code> : Delete An Environment Variable</h3>
<p><code class="highlighter-rouge">unset MY_VAR</code></p>

<h2 id="special-characters-quotes--escapes">Special Characters: Quotes &amp; Escapes</h2>

<ul>
  <li><code class="highlighter-rouge">$</code> escapes a single character.</li>
  <li>single quotes <code class="highlighter-rouge">'</code>..<code class="highlighter-rouge">'</code> treats something as a string, escapes the whole thing</li>
  <li>double quotes do <strong>not escape anything</strong>.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="se">\$</span><span class="s2">COL"</span>  <span class="c"># this will escape the $</span>
<span class="nv">$COL</span>

<span class="o">&gt;</span> <span class="nb">echo</span> <span class="s1">'$COL'</span> <span class="c"># single quotes escape things, means the literal string</span>
<span class="nv">$COL</span>

<span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$COL</span><span class="s2">"</span> <span class="c"># does not escape anything</span>
250

<span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"The date is: </span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span><span class="s2">"</span> <span class="c"># command substitution with bacticks</span>
The <span class="nb">date </span>is Mon Jul 25
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="redirecting-output">Redirecting Output</h1>

<h2 id="using-devnull">Using dev/null</h2>

<p>Use <code class="highlighter-rouge">dev/null</code> when you want to discard output and don‚Äôt want to put in the background. <code class="highlighter-rouge">/dev/null</code> is a device, and like everything is a file in linux.  Everything you write to <code class="highlighter-rouge">dev/null</code> just dissapears.</p>

<p>For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c">#redirect to dev/null example</span>

<span class="nb">echo</span> <span class="s2">"This is going to the blackhole."</span> <span class="o">&gt;&gt;</span> /dev/null
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Note <code class="highlighter-rouge">&gt;&gt;</code> (append) or <code class="highlighter-rouge">&gt;</code> (overwrite) will work for dev/null, although out of habit in other scenarios it is better to append when unsure using <code class="highlighter-rouge">&gt;&gt;</code>.</p>

<h2 id="redirect--std-error">Redirect  Std Error</h2>

<p><code class="highlighter-rouge">ls -l /bin/usr 2&gt; ls-error.txt</code></p>

<h2 id="redirect-std-out--err-into-one-file">Redirect Std Out &amp; Err into one file</h2>

<p><code class="highlighter-rouge">ls  -l /bin/sur &gt; ls-output.txt 2&gt;&amp;1</code></p>

<p>Shortcut: use <code class="highlighter-rouge">&amp;</code></p>

<p><code class="highlighter-rouge">ls  -l /bin/sur &amp;&gt; ls-output.txt</code></p>

<h2 id="dispose-std-err-output-devnull">Dispose Std Err output <code class="highlighter-rouge">/dev/null</code></h2>

<p><code class="highlighter-rouge">ls -l /bin/sur 2&gt; /dev/null</code></p>

<h1 id="the-read-statement">The Read Statement</h1>

<p>note the backticks and the <code class="highlighter-rouge">expr</code> command</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"Enter Your First Name: "</span>
<span class="nb">read </span>FIRSTNAME

<span class="nb">echo</span> <span class="s2">"Enter Your Last Name"</span>
<span class="nb">read </span>LASTNAME

<span class="nb">echo</span> <span class="s2">"Your Full Name is </span><span class="nv">$FIRSTNAME</span><span class="s2"> </span><span class="nv">$LASTNAME</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="s2">"Enter Your Age: "</span>
<span class="nb">read </span>USERAGE

<span class="nb">echo</span> <span class="s2">"In 10 Years, You will be </span><span class="sb">`</span><span class="nb">expr</span> <span class="nv">$USERAGE</span> + 10<span class="sb">`</span><span class="s2"> years old."</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="shell-expansion">Shell Expansion</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">echo </span>sh<span class="o">{</span>ot,oot,ort<span class="o">}</span>
shot shoot short

<span class="o">&gt;</span> <span class="nb">echo </span>st<span class="o">{</span>il,al<span class="o">}</span>l
still stall

<span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$[</span><span class="s2"> 2 * 2 ]"</span>
4

<span class="c"># set and display var at same time</span>
<span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">VARNAME</span>:<span class="p">=something</span><span class="k">}</span><span class="s2">"</span>
something
<span class="o">&gt;</span> <span class="nb">echo</span> <span class="nv">$VARNAME</span>
something

<span class="c"># will print any environment variable that starts with HO</span>
<span class="o">&gt;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="p">!HO*</span><span class="k">}</span><span class="s2">"</span>
OME HOSTNAME HOSTTYPE
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="brace-expansion">Brace Expansion</h2>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">echo </span>Hello-<span class="o">{</span>Foo,Bar,Baz<span class="o">}</span><span class="nt">-World</span>                             
Hello-Foo-World Hello-Bar-World Hello-Baz-World
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="Linux%20Command%20Line%202E/FFE1D5B6-3600-45F3-98EA-E5D8D8E38339.png" alt="" /></p>

<h2 id="parameter-expansion-like-coalesce">Parameter Expansion, Like Coalesce</h2>

<p><code class="highlighter-rouge">{parameter:-word}</code></p>

<p>If parameter is unset (i.e., does not exist) or is empty, this expansion results in the value of word. If parameter is not empty, the expansion results in the value of parameter.</p>

<p><img src="Linux%20Command%20Line%202E/B8AEEDCB-6411-4AAB-9A5E-60DFBF77338A.png" alt="" /></p>

<h1 id="types-of-variables">Types of Variables</h1>

<p>Variables are declared implicitly, and the value will implicitly determine what kind of variable it is.  However, it could be useful to explicitly define the type.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c"># an integer variable</span>
<span class="nv">MYVAR</span><span class="o">=</span>4

<span class="c"># use command substitution</span>
<span class="o">&gt;</span> <span class="nb">echo</span> <span class="sb">`</span><span class="nb">expr</span> <span class="nv">$MYVAR</span> + 5<span class="sb">`</span>
9
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Show the type of the variable, using <code class="highlighter-rouge">decalre -p</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">MYVAR</span><span class="o">=</span>4

<span class="c"># this shows you MYVAR is a string</span>
<span class="o">&gt;</span> <span class="nb">declare</span> <span class="nt">-p</span> MYVAR
<span class="nb">declare</span> <span class="nt">--</span> <span class="nv">MYVAR</span><span class="o">=</span><span class="s2">"4"</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>Interpreting the output of <code class="highlighter-rouge">declare -p</code>: <code class="highlighter-rouge">--</code> tells you that this variable is not strongly typed and its type has not been declared.</p>

<p>Set the type of the variable, using <code class="highlighter-rouge">decalre -i</code>
<strong>notice how the value is converted to zero</strong> when setting <code class="highlighter-rouge">NEWVAR</code> to a string when you have declared it as an integer.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">declare</span> <span class="nt">-i</span> <span class="nv">NEWVAR</span><span class="o">=</span>10
<span class="o">&gt;</span> <span class="nb">declare</span> <span class="nt">-p</span> NEWVAR
<span class="nb">declare</span> <span class="nt">-i</span> <span class="nv">NEWVAR</span><span class="o">=</span><span class="s2">"10"</span>

<span class="o">&gt;</span> <span class="nv">NEWVAR</span><span class="o">=</span><span class="s2">"Hello"</span>
<span class="o">&gt;</span> <span class="nb">echo</span> <span class="nv">$NEWVAR</span>
0
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Notice in the output instead of <code class="highlighter-rouge">--</code> we have <code class="highlighter-rouge">-i</code> which means this variable is an integer.</p>

<h4 id="readonly-variables">Readonly Variables</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>&gt; declare -r READONLY="This is a string we cannot overwrite"
&gt; declare -p READONLY
declare -r READONLY="This is a string we cannot overwrite"
</pre></td></tr></tbody></table></code></pre></div></div>
<p>The <code class="highlighter-rouge">-r</code> in the output confirms this is a readonly variable.</p>

<p>Equivalent to <code class="highlighter-rouge">declare -r</code>, using the <code class="highlighter-rouge">readonly</code> command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">readonly </span><span class="nv">MYREADONLY</span><span class="o">=</span><span class="s2">"This String"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="types-of-variables-1">Types of Variables</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c"># declare int variable:</span>
<span class="o">&gt;</span> <span class="nb">declare</span> <span class="nt">-i</span> <span class="nv">NEWVAR</span><span class="o">=</span>10

<span class="c"># inpsect type of NEWVAR</span>
<span class="o">&gt;</span> <span class="nb">declare</span> <span class="nt">-p</span> NEWVAR
<span class="nb">declare</span> <span class="nt">-i</span> <span class="nv">NEWVAR</span><span class="o">=</span><span class="s2">"10"</span>

<span class="c"># declare readonly variable</span>
<span class="o">&gt;</span> <span class="nb">declare</span> <span class="nt">-r</span> <span class="nv">READONLY</span><span class="o">=</span><span class="s2">"This is something we cannot overwrite"</span>

<span class="c"># try to cancel READONLY type</span>
<span class="o">&gt;</span> <span class="nb">declare</span> +r READONLY
<span class="c">### will result in an error</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Variables in bash are implicitly typed, the type will be inferred from the value you assign.</p>

<ul>
  <li>determine the type of a variable: <code class="highlighter-rouge">declare -p $MYVAR</code></li>
  <li>declare variable as integer:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>  <span class="nb">declare</span> <span class="nt">-i</span> <span class="nv">NEWVAR</span><span class="o">=</span>10
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>If you explicitly declare a variable as an int but assign it to a string, it will implicitly convert the value to <code class="highlighter-rouge">0</code>.</li>
</ul>

<h1 id="arrays">Arrays</h1>

<p>Indexing <strong>starts at zero.</strong>  Notice that arrays are <strong>space-delimited.</strong>, this is a strange thing if you are used to arrays w/commas.</p>

<p>You can have spaces in values if you enclose the spaces in double-quotes.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c"># notice no commas just spaces!</span>
<span class="o">&gt;</span> <span class="nv">MYARRAY</span><span class="o">=(</span>‚ÄúFirst‚Äù ‚ÄúSecond‚Äù ‚ÄúThird‚Äù<span class="o">)</span>
<span class="o">&gt;</span> <span class="nb">echo</span> <span class="k">${</span><span class="nv">MYARRAY</span><span class="p">[2]</span><span class="k">}</span>
‚ÄúThird‚Äù
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="iterating-through-arrays">Iterating Through Arrays</h3>

<p>See <a href="./array.sh">./array.sh</a></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c"># simple array list and loop for display</span>

<span class="nv">SERVERLIST</span><span class="o">=(</span>‚Äúwebsrv01‚Äù ‚Äúwebsrv02‚Äù ‚Äúwebsrv03‚Äù<span class="o">)</span>
<span class="nv">COUNT</span><span class="o">=</span>0

<span class="k">for </span>INDEX <span class="k">in</span> <span class="k">${</span><span class="nv">SERVERLIST</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> ‚ÄúProcessing Server: <span class="k">${</span><span class="nv">SERVERLIST</span><span class="p">[COUNT]</span><span class="k">}</span>‚Äù
    <span class="nv">COUNT</span><span class="o">=</span>‚Äú<span class="sb">`</span><span class="nb">expr</span> <span class="nv">$COUNT</span> + 1 <span class="sb">`</span>‚Äù
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You cannot decrease the size of the array, you can only increase the size of the array.</p>

<h3 id="passing-variables-to-scripts-at-the-command-line">Passing Variables to Scripts at the Command Line</h3>

<p>see <a href="cli_args.sh">./cli_args.sh</a></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> ‚ÄúThe following item was passed to the script at run <span class="nb">time</span> <span class="nv">$1</span>‚Äù
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The arguments go from 1-n (starts at 1).</p>

<p>if you have an argument that contains a space, then you wan to enclose this in quotes, otherwhise space is seen as a delimiter.</p>

<h1 id="conditionals">Conditionals</h1>

<h2 id="the-if-statement">The if statement</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>3
<span class="nb">echo</span> ‚ÄúGuess the Secret Number‚Äù
<span class="nb">echo</span> ‚Äú<span class="o">======================</span>‚Äú
<span class="nb">echo</span> ‚Äú‚Äù
<span class="nb">echo</span> ‚ÄúEnter a Number Between 1 and 5‚Äù
<span class="nb">read </span>GUESS


<span class="k">if</span> <span class="o">[</span> <span class="nv">$GUESS</span> <span class="nt">-eq</span> 3 <span class="o">]</span>
    <span class="k">then
        </span><span class="nb">echo</span> ‚ÄúYou guessed the Correct Number!‚Äù
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Test if a file exists <a href="./iffileexists.sh">iffileexists.sh</a></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="nv">FILENAME</span><span class="o">=</span><span class="nv">$1</span>
<span class="nb">echo</span> ‚ÄúTesting <span class="k">for </span>the existence of a file called <span class="nv">$FILENAME</span>‚Äù

<span class="k">if</span> <span class="o">[</span> <span class="nt">-a</span> <span class="nv">$FILENAME</span> <span class="o">]</span>
    <span class="k">then
        </span><span class="nb">echo</span> ‚Äú<span class="nv">$FILENAME</span> does exist!‚Äù
<span class="k">fi</span>

<span class="c"># negation operator </span>
<span class="k">if</span> <span class="o">[!</span> <span class="nt">-a</span> <span class="nv">$FILENAME</span> <span class="o">]</span>
    <span class="k">then
        </span><span class="nb">echo</span> ‚Äú<span class="nv">$FILENAME</span> does not exist!‚Äù
<span class="k">fi</span>

<span class="c"># test multiple expressions in if statement</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="nv">$FILENAME</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="nt">-R</span> <span class="nv">$FILENAME</span><span class="o">]</span>
    <span class="k">then
        </span><span class="nb">echo</span> ‚ÄúFile <span class="nv">$FILENAME</span> exists and is readable.‚Äù
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="highlighter-rouge">-a</code> is the same as <code class="highlighter-rouge">-f</code> w.r.t. testing for the existence of a file.</p>

<h2 id="ifthenelse">If/Then/Else</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> ‚ÄúEnter a number between 1 and 3:‚Äù
<span class="nb">read </span>VALUE

<span class="c"># use semicolons for readability</span>
<span class="k">if</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú1‚Äù <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> ‚ÄúYou entered <span class="nv">$VALUE</span>‚Äù
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Using an OR statement:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c"># another variation</span>
<span class="k">if</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú1‚Äù <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú2‚Äù <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú3‚Äù <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> ‚ÄúYou entered <span class="nv">$VALUE</span>‚Äù
<span class="k">else
    </span><span class="nb">echo</span> ‚ÄúYou didn‚Äôt follow directions!‚Äù
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Redirect errors to /dev/null</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú1‚Äù <span class="o">]</span> 2&gt;/dev/null <span class="o">||</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú2‚Äù <span class="o">]</span> 2&gt;/dev/null <span class="o">||</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú3‚Äù <span class="o">]</span> 2&gt;/dev/null<span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> ‚ÄúYou entered <span class="nv">$VALUE</span>‚Äù
<span class="k">else
    </span><span class="nb">echo</span> ‚ÄúYou didn‚Äôt follow directions!‚Äù
<span class="k">fi

if</span> <span class="o">[</span> ‚Äú<span class="nv">$VALUE</span>‚Äù <span class="nt">-eq</span> ‚Äú1‚Äù <span class="o">]</span> 2&gt;/dev/null<span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> ‚ÄúYou entered <span class="c">#1‚Äù</span>
<span class="k">elif</span> ‚Äú <span class="s2">"</span><span class="nv">$VAL</span><span class="s2">‚ÄùE"</span> <span class="nt">-e</span>‚Äú ‚Äù2<span class="s2">" ] 2&gt;/dev/null; then
    ech‚Äú "</span>You entered ‚Äù2<span class="s2">"
elif ‚Äú "</span><span class="nv">$VAL</span>‚ÄùE<span class="s2">" -e‚Äú ‚Äù3"</span> <span class="o">]</span> 2&gt;/dev/null<span class="p">;</span> <span class="k">then
    </span>ech‚Äú <span class="s2">"You entered ‚Äù3"</span>
<span class="k">else
    </span>ech‚Äú <span class="s2">"You di‚Äôn't follow direction‚Äù!"</span>
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="conditional-expressions">Conditional Expressions</h1>

<p>Hamel‚Äôs Note: Use Double Brackets <code class="highlighter-rouge">[[ ]]</code>, not single brackets</p>

<h2 id="file-expressions">File Expressions</h2>

<p><img src="Linux%20Command%20Line%202E/04C3BAEC-A2B6-4EDF-B61D-7F290E5C94BE.png" alt="" /></p>

<p><img src="Linux%20Command%20Line%202E/C96B41FA-AF66-421D-96BC-B3EA0FA39139.png" alt="" /></p>

<h2 id="string-expressions">String Expressions</h2>

<p><img src="Linux%20Command%20Line%202E/7E21E94F-714E-48EB-9819-6CF33D414404.png" alt="" /></p>

<h2 id="integer-expressions">Integer Expressions</h2>

<p><img src="Linux%20Command%20Line%202E/1F1BC194-36CA-4949-83A5-0EB99A150F18.png" alt="" /></p>

<h1 id="aside-output-streams">Aside: Output Streams</h1>

<p>https://askubuntu.com/questions/625224/how-to-redirect-stderr-to-a-file</p>

<p><strong>1</strong>: stdout</p>

<p><strong>2</strong>: stderr</p>

<p>error messages are printed to standard error. The classic redirection operator (command &gt; file) only redirects standard output, so standard error is still shown on the terminal. To redirect stderr as well, you have a few choices:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># Redirect stdout to one file and stderr to another file:</span>
<span class="nb">command</span> <span class="o">&gt;</span> out 2&gt;error

<span class="c"># Redirect stderr to stdout (&amp;1), and then redirect stdout to a file:</span>

<span class="nb">command</span> <span class="o">&gt;</span>out 2&gt;&amp;1

<span class="c"># Redirect both to a file (this isn‚Äôt supported by all shells, bash and zsh support it, for example, but sh and ksh do not)</span>
<span class="nb">command</span> &amp;&gt; out
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="control-flow">Control Flow</h1>

<ul>
  <li><code class="highlighter-rouge">break</code> exits the loop</li>
  <li><code class="highlighter-rouge">continue</code> goes to next iteration in loop</li>
  <li><code class="highlighter-rouge">until</code> is opposite of while</li>
</ul>

<h2 id="for-loop">For Loop</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> ‚ÄúList all the shell scripts contents of the directory‚Äù
<span class="nv">SHELLSCRIPTS</span><span class="o">=</span><span class="sb">`</span><span class="nb">ls</span> <span class="k">*</span>.sh<span class="sb">`</span>

<span class="c"># alternate using for loop</span>

<span class="k">for </span>FILE <span class="k">in</span> <span class="k">*</span>.sh<span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> ‚Äú<span class="nv">$FILE</span>‚Äù
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="case-statement">Case Statement</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> ‚Äú1<span class="o">)</span> Choice 2‚Äù
<span class="nb">echo</span> ‚Äú2<span class="o">)</span> Choice 2‚Äù
<span class="nb">echo</span> ‚Äú3<span class="o">)</span> Choice 3‚Äù
<span class="nb">echo</span> ‚ÄúEnter Choice:‚Äù

<span class="nb">read </span>MENUCHOICE

<span class="k">case</span> <span class="nv">$MENUCHOICE</span> <span class="k">in
    </span>1<span class="p">)</span>
        <span class="nb">echo</span> ‚ÄúYou have choosen the first option‚Äù<span class="p">;;</span>
    2<span class="p">)</span>
        <span class="nb">echo</span> ‚ÄúYou have chosen the second option‚Äù<span class="p">;;</span>
    3<span class="p">)</span> 
        <span class="nb">echo</span> ‚ÄúYou have selected the third option‚Äù<span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>
        <span class="nb">echo</span> ‚ÄúYou have choosen unwisely‚Äù<span class="p">;;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="match-multiple-case-statements">Match Multiple Case Statements</h3>

<p>Allow many matches to occur</p>

<p><img src="Linux%20Command%20Line%202E/B619EA40-60AC-43A9-91F2-D38B9AF88B29.png" alt="" /></p>

<h2 id="while-loop">While Loop</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> ‚ÄúEnter number of <span class="nb">times </span>to display message:‚Äù
<span class="nb">read </span>NUM

<span class="nv">COUNT</span><span class="o">=</span>1

<span class="c"># -le means less than or equal to</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$COUNT</span> <span class="nt">-le</span> <span class="nv">$NUM</span> <span class="o">]</span>
<span class="k">do
    </span><span class="nb">echo</span> ‚ÄúHello World <span class="nv">$COUNT</span>‚Äù
    <span class="nv">COUNT</span><span class="o">=</span>‚Äú<span class="sb">`</span><span class="nb">expr</span> <span class="nv">$COUNT</span> + 1<span class="sb">`</span>‚Äù
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="asynchronous-execution-with-wait">Asynchronous Execution with <code class="highlighter-rouge">wait</code></h2>

<p><img src="Linux%20Command%20Line%202E/D58576C6-9AEA-4124-8575-2A3406CC6590.png" alt="" /></p>

<p>This is the most straightforward implementation of async I have ever seen.  You basically decide when to block and wait for a process that you previously decided to run in a child process.</p>

<h2 id="short-circuit-expressions">Short Circuit Expressions</h2>

<h3 id="-command1--command2">&amp;&amp;: <code class="highlighter-rouge">command1 &amp;&amp; command2</code>:</h3>

<p>only run <code class="highlighter-rouge">command2</code> if <code class="highlighter-rouge">command1</code> is successful</p>

<h3 id="-command1--command2-1">||: <code class="highlighter-rouge">command1 || command2</code>:</h3>

<p>only run <code class="highlighter-rouge">command2</code> if <code class="highlighter-rouge">command1</code> fails</p>

<h1 id="execution-operators">Execution Operators</h1>

<p>the file super duper does not exist</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>rm superduper 2&gt; /dev/null &amp;&amp; echo "File was deleted"
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The <code class="highlighter-rouge">echo</code> will only execute if the <code class="highlighter-rouge">rm</code> command was successful and exits without errors.  Therefore, in this case the <code class="highlighter-rouge">echo</code> statement will not be triggered.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>rm superduper 2&gt; /dev/null &amp;&amp; echo "File was deleted" || echo "File does not exit"
</pre></td></tr></tbody></table></code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td>Because of short-circuiting rules, the second statement of the OR</td>
      <td>¬†</td>
      <td>will not trigger unless the left hand side is false.</td>
    </tr>
  </tbody>
</table>

<ol>
  <li><code class="highlighter-rouge">&amp;&amp;</code> :  and</li>
  <li><code class="highlighter-rouge">||</code> :  or</li>
</ol>

<h1 id="inputoutput">Input/Output</h1>

<h2 id="reading-files">Reading Files</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> ‚ÄúEnter a filename‚Äù 
<span class="nb">read </span>FILE

<span class="k">while </span><span class="nb">read</span> <span class="nt">-r</span> SUPERHERO<span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> ‚ÄúSuperhero Name: <span class="nv">$SUPERHERO</span>‚Äù
<span class="k">done</span> &lt; ‚Äú<span class="nv">$FILE</span>‚Äù
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="reading-files-with-loops">Reading Files with loops</h2>

<p><img src="Linux%20Command%20Line%202E/D08C1840-7C02-4212-AC01-C968DB36EC81.png" alt="" /></p>

<h2 id="file-descriptors">File Descriptors</h2>

<p>Use a number &gt;= 3 for file descriptors.</p>

<p>0 - stdin
1 - stdout
2 - stderr</p>

<p>/dev/null -&gt; generic place where you can redirect streams into nothing.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> ‚ÄúEnter file name: ‚Äú
<span class="nb">read </span>FILE

<span class="c"># &lt; means readonly,  &gt; means write only,  &lt;&gt; means allow read &amp; write</span>
<span class="c"># assign file descriptor to filename</span>
<span class="nb">exec </span>5&lt;<span class="o">&gt;</span><span class="nv">$FILE</span>

<span class="k">while </span><span class="nb">read</span> <span class="nt">-r</span> SUPERHERO<span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> ‚ÄúSuperhero Name: <span class="nv">$SUPERHERO</span>‚Äù
<span class="k">done</span> &lt;&amp;5 <span class="c">#use &amp; to reference the file descriptor</span>

<span class="c"># append to end of file.</span>
<span class="nb">echo</span> <span class="s2">"File Was Read On: </span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;5

<span class="c"># close file descriptor</span>
<span class="nb">exec </span>5&gt;&amp;-
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="delimiters-ifs">Delimiters (IFS)</h2>

<p>IFS - Internal Field Seperator
Default is a space</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># this will return a space</span>
<span class="nb">echo</span> <span class="nv">$IFS</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"Enter filename to parse: "</span>
<span class="nb">read </span>FILE <span class="c"># spacedelim.txt</span>

<span class="c"># https://stackoverflow.com/questions/24337385/bash-preserve-string-with-spaces-input-on-command-line</span>

<span class="k">while </span><span class="nb">read</span> <span class="nt">-r</span> CPU MEM DISK<span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"CPU: </span><span class="nv">$CPU</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"Memory: </span><span class="nv">$MEM</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"Disk: </span><span class="nv">$DISK</span><span class="s2">"</span>
<span class="k">done</span> &lt;<span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="traps-and-signals">Traps and Signals</h2>

<p>https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html</p>
<ul>
  <li><code class="highlighter-rouge">cntrl+c</code> = SIGINT</li>
  <li><code class="highlighter-rouge">cntrl+z</code> = SIGTSTP</li>
  <li><code class="highlighter-rouge">kill</code> command (without -9 flag) = SIGTERM</li>
  <li><code class="highlighter-rouge">kill -9</code> = SIGKILL;  this signal is not sent to the process, it is just killed.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>clear

<span class="c"># first argument is what to exexute </span>
<span class="nb">trap</span> <span class="s1">'echo " - Please Press Q to Exit."'</span> SIGINT SIGTERM SIGTSTP

<span class="c"># cntrl+c = SIGINT</span>
<span class="c"># cntrl+z = SIGTSTP  (Suspend, send to background)</span>



<span class="k">while</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CHOICE</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"Q"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CHOICE</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"q"</span> <span class="o">]</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"Main Menu"</span>
    <span class="nb">echo</span> <span class="s2">"======="</span>
    <span class="nb">echo</span> <span class="s2">"1) Choice One"</span>
    <span class="nb">echo</span> <span class="s2">"2) Choice Two"</span>
    <span class="nb">echo</span> <span class="s2">"3) Choice Three"</span>
    <span class="nb">echo</span> <span class="s2">"Q) Quit"</span>
    <span class="nb">read </span>CHOICE

    clear
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="debugging-shell-scripts">Debugging Shell Scripts</h1>

<p><code class="highlighter-rouge">bash -x</code> will run a shell script in debug mode.</p>

<p>google this to figure out how to interpret output of debugging.</p>

<h1 id="error-handling">Error Handling</h1>

<p><code class="highlighter-rouge">$?</code> contains the status code of the last command.</p>

<p>What if you have the code:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">"Change to a directory and list the contents"</span>
<span class="nv">DIRECTORY</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nb">cd</span> <span class="nv">$DIRECTORY</span>

<span class="c"># DANGER: the below command will still run even if the previous command failed!</span>
<span class="nb">rm</span> <span class="k">*</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Solution:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nv">DIRECTORY</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nb">cd</span> <span class="nv">$DIRECTORY</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-eq</span> <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Changed directory successfully into </span><span class="nv">$DIRECTORY</span><span class="s2">"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"Cannot change driectories, exiting with error."</span>
    <span class="nb">exit </span>111 <span class="c"># you can exit with any code you want!</span>
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="functions">Functions</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
funcExample <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"We are inside the function"</span>
<span class="o">}</span>

<span class="c">#call the function</span>
funcExample

</pre></td></tr></tbody></table></code></pre></div></div>
<h2 id="structure-of-functions-in-a-shell-script">structure of functions in a shell script</h2>

<p>Unlike python, <strong>you must define your functions before you call them.</strong></p>

<h2 id="scope">Scope</h2>

<p>setting a variable within a function <strong>defines that variable globally</strong> after that function is called!!!</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="nv">GLOBALVAR</span><span class="o">=</span>‚ÄúGlobally Visible‚Äù

<span class="c"># sample function for function variable scope</span>
funcExample <span class="o">()</span> <span class="o">{</span>
    <span class="c"># local</span>
    <span class="nv">LOCALVAR</span><span class="o">=</span>‚ÄúLocally Visible‚Äù

    <span class="nb">echo</span> ‚ÄúFrom within the <span class="k">function</span>, the variable‚Äôs value is <span class="nb">set </span>to <span class="nv">$LOCALVAR</span> ‚Ä¶‚Äù
<span class="o">}</span>

<span class="c"># script start</span>

<span class="nb">echo</span> ‚Äúthis happens before the <span class="k">function </span>call‚Äù
<span class="nb">echo</span> ‚Äú‚Äù
<span class="nb">echo</span> ‚ÄúLocal Variable <span class="o">=</span> <span class="nv">$LOCALVAR</span> after the <span class="k">function </span>call.‚Äù
<span class="nb">echo</span> ‚ÄúGlobal Variable <span class="o">=</span> <span class="nv">$GLOBALVAR</span> <span class="o">(</span>before the <span class="k">function </span>call<span class="o">)</span>.‚Äù

funcExample

<span class="nb">echo</span> ‚Äúthis happens after the <span class="k">function </span>call‚Äù
<span class="nb">echo</span> ‚ÄúLocal Variable <span class="o">=</span> <span class="nv">$LOCALVAR</span> after the <span class="k">function </span>call.‚Äù
<span class="nb">echo</span> ‚ÄúGlobal Variable <span class="o">=</span> <span class="nv">$GLOBALVAR</span> <span class="o">(</span>before the <span class="k">function </span>call<span class="o">)</span>.‚Äù
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Output of above code:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>ÓÇ∞ ./scope.sh
this happens before the function call

Local Variable =  after the function call.
Global Variable = Globally Visible (before the function call).
From within the function, the variable‚Äôs value is set to Locally Visible ‚Ä¶
this happens after the function call
Local Variable = Locally Visible after the function call.
Global Variable = Globally Visible (before the function call).
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="functions-with-parameters">Functions With Parameters</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c"># global</span>
<span class="nv">USERNAME</span><span class="o">=</span><span class="nv">$1</span>

funcAgeInDays <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> ‚ÄúHello <span class="nv">$USERNAME</span>, You are <span class="nv">$1</span> Years old.‚Äù
    <span class="nb">echo</span> ‚ÄúThat makes you approx <span class="sb">`</span><span class="nb">expr </span>365 <span class="se">\*</span> <span class="nv">$1</span><span class="sb">`</span> days old‚Äù
<span class="o">}</span>

<span class="c">#script - start</span>
<span class="nb">read</span> <span class="nt">-r</span> <span class="nt">-p</span> ‚ÄúEnter your age:‚Äù AGE

<span class="c"># pass in arguments like this</span>
funcAgeInDays <span class="nv">$AGE</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="nested-functions">Nested Functions</h2>

<p>Author of course uses this for organization purposes.  When you call a function if it has nested functions the functions defined within will be exposed to the script also.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="c"># global</span>
<span class="nv">GENDER</span><span class="o">=</span><span class="nv">$1</span>

funcHuman <span class="o">()</span> <span class="o">{</span>
    <span class="nv">ARMS</span><span class="o">=</span>2
    <span class="nv">LEGS</span><span class="o">=</span>2

    funcMale <span class="o">()</span> <span class="o">{</span>
        <span class="nv">BEARD</span><span class="o">=</span>1
        <span class="nb">echo</span> ‚ÄúThis man has <span class="nv">$ARMS</span> arms and <span class="nv">$LEGS</span> legs with <span class="nv">$BEARD</span> beard‚Äù
    <span class="o">}</span>

    funcFemale <span class="o">()</span> <span class="o">{</span>
        <span class="nv">BEARD</span><span class="o">=</span>0
        <span class="nb">echo</span> ‚ÄúThis woman has <span class="nv">$ARMS</span> arms and <span class="nv">$LEGS</span> legs with <span class="nv">$BEARD</span> beard‚Äù
    <span class="o">}</span>
<span class="o">}</span>

<span class="c"># script start</span>
clear

<span class="c"># determine the actual gender and display the characteristics.</span>
<span class="k">if</span>  <span class="o">[</span> ‚Äú<span class="nv">$GENDER</span>‚Äù <span class="o">==</span> ‚Äúmale‚Äù <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span>funcHuman
    funcMale <span class="c"># this function is available after the parent function is called.</span>
<span class="k">else
    </span>funcHuman
    funcFemale
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="function-return-and-exit">Function Return and Exit</h2>

<p>This allows you to get arguments from the command line and then exit with a proper code and also use function returns inside scripts.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="c"># demo of return values and testing results</span>

<span class="nv">YES</span><span class="o">=</span>0
<span class="nv">NO</span><span class="o">=</span>1
<span class="nv">FIRST</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">SECOND</span><span class="o">=</span><span class="nv">$2</span>
<span class="nv">THIRD</span><span class="o">=</span><span class="nv">$3</span>

<span class="c"># function definitions</span>

funcCheckParams <span class="o">()</span> <span class="o">{</span>
    <span class="c"># did we get three</span>
    <span class="c"># -z equivalent to isnull (in this case means not-null b/c of !)</span>
    <span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-z</span> ‚Äú<span class="nv">$THIRD</span>‚Äù <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> ‚ÄúWe got three params‚Äù
        <span class="k">return</span> <span class="nv">$YES</span>
    <span class="k">else
        </span><span class="nb">echo</span> ‚ÄúWe did not get three params‚Äù
        <span class="k">return</span> <span class="nv">$NO</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="c"># script start</span>

funcCheckParams
<span class="c"># the return value from the function gets stored in $?</span>
<span class="nv">RETURN_VALS</span><span class="o">=</span><span class="nv">$?</span>

<span class="k">if</span> <span class="o">[</span> ‚Äú<span class="nv">$RETURN_VALS</span>‚Äù <span class="nt">-eq</span> ‚Äú<span class="nv">$YES</span>‚Äù <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> ‚ÄúWe received three params and they are:‚Äù
    <span class="nb">echo</span> ‚ÄúParam 1: <span class="nv">$FIRST</span>‚Äù
    <span class="nb">echo</span> ‚ÄúParam 2: <span class="nv">$SECOND</span>‚Äù
    <span class="nb">echo</span> ‚ÄúParam 3: <span class="nv">$THIRD</span>‚Äù
<span class="k">else
    </span><span class="nb">echo</span> ‚ÄúUsage: funcreturn.sh <span class="o">[</span>param1] <span class="o">[</span>param2] <span class="o">[</span>param3]‚Äù
    <span class="nb">exit </span>1
<span class="k">fi</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="interactive-menus">Interactive Menus</h1>

<h2 id="infobox">Infobox</h2>

<p>Dissappears unless you sleep (see below).  Does not come with any buttons.</p>

<p>see <a href="exercises/26_dialog.sh">exercises/26_dialog.sh</a></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c"># globals</span>
<span class="nv">INFOBOX</span><span class="o">=</span><span class="k">${</span><span class="nv">INFOBOX</span><span class="p">=dialog</span><span class="k">}</span>
<span class="nv">TITLE</span><span class="o">=</span>‚ÄúDefault‚Äù
<span class="nv">MESSAGE</span><span class="o">=</span>‚ÄúSomething to say‚Äù
<span class="nv">XCOORD</span><span class="o">=</span>10
<span class="nv">YCOORD</span><span class="o">=</span>20

funcDisplayInfoBox <span class="o">()</span> <span class="o">{</span>
    <span class="nv">$INFOBOX</span> ‚Äîtitle ‚Äú<span class="nv">$1</span>‚Äù ‚Äîinfobox ‚Äú<span class="nv">$2</span>‚Äù ‚Äú<span class="nv">$3</span>‚Äù ‚Äú<span class="nv">$4</span>‚Äù
    <span class="nb">sleep</span> ‚Äú<span class="nv">$5</span>‚Äù
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="msgbox">Msgbox</h2>

<p>Msgbox - dissapears unless you sleep pass <code class="highlighter-rouge">--msgbox</code> argument, comes with default ok button and stays on screen.</p>

<p>see <a href="exercises/27_msgbox.sh">exercises/27_msgbox.sh</a></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># global</span>
<span class="nv">MSGBOX</span><span class="o">=</span><span class="k">${</span><span class="nv">MSGBOX</span><span class="p">=dialog</span><span class="k">}</span>
<span class="nv">TITLE</span><span class="o">=</span>‚ÄúDefault‚Äù
<span class="nv">MESSAGE</span><span class="o">=</span>‚ÄúSome Message‚Äù
<span class="nv">XCOORD</span><span class="o">=</span>10
<span class="nv">YCOORD</span><span class="o">=</span>20

funcDisplayMsgBox <span class="o">()</span> <span class="o">{</span>
    <span class="nv">$MSGBOX</span> ‚Äîtitle ‚Äú<span class="nv">$1</span>‚Äù ‚Äîmsgbox ‚Äú<span class="nv">$2</span>‚Äù ‚Äú<span class="nv">$3</span>‚Äù ‚Äú<span class="nv">$4</span>‚Äù
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="menus">Menus</h2>

<p>See pdf notes/scripts</p>
:ET