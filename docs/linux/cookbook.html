

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Cookbook - Notes</title>

    
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Cookbook | Notes</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="Cookbook" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hamel’s Notes about random things" />
<meta property="og:description" content="Hamel’s Notes about random things" />
<link rel="canonical" href="https://notes.hamel.dev/docs/linux/cookbook.html" />
<meta property="og:url" content="https://notes.hamel.dev/docs/linux/cookbook.html" />
<meta property="og:site_name" content="Notes" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cookbook" />
<script type="application/ld+json">
{"description":"Hamel’s Notes about random things","url":"https://notes.hamel.dev/docs/linux/cookbook.html","@type":"WebPage","headline":"Cookbook","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="https://notes.hamel.dev/" class="site-title lh-tight">
  Notes

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://notes.hamel.dev/docs/linux/" class="nav-list-link">Linux & Bash Scripting</a><ul class="nav-list "><li class="nav-list-item  active"><a href="https://notes.hamel.dev/docs/linux/cookbook.html" class="nav-list-link active">Cookbook</a></li><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/linux/linux.html" class="nav-list-link">Processes, Permissions and Moving Data</a></li><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/linux/bash_scripting.html" class="nav-list-link">Cheatsheet</a></li><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/linux/misc_utils.html" class="nav-list-link">Misc Utilities</a></li><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/linux/osx.html" class="nav-list-link">OSX Shell Tips</a></li></ul></li><li class="nav-list-item"><a href="https://notes.hamel.dev/docs/docker/Docker-In-Action.html" class="nav-list-link">Docker</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://notes.hamel.dev/docs/actions/" class="nav-list-link">GitHub Actions</a><ul class="nav-list "><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/actions/resources.html" class="nav-list-link">Resources</a></li><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/actions/ocotkit.html" class="nav-list-link">ocotokit.js</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://notes.hamel.dev/docs/jupyter/" class="nav-list-link">Jupyter</a><ul class="nav-list "><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/jupyter/remote_browser.html" class="nav-list-link">Remote Browser For Jupyter</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://notes.hamel.dev/docs/python/" class="nav-list-link">python</a><ul class="nav-list "><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/python/concurrency.html" class="nav-list-link">Python Concurrency</a></li></ul></li><li class="nav-list-item"><a href="https://notes.hamel.dev/docs/programming-languages/pl.html" class="nav-list-link">programming languages</a></li><li class="nav-list-item"><a href="https://notes.hamel.dev/docs/how-to-learn/lhtl.html" class="nav-list-link">How To Learn</a></li><li class="nav-list-item"><a href="https://notes.hamel.dev/about/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://notes.hamel.dev/docs/fastai/" class="nav-list-link">fastai notes</a><ul class="nav-list "><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/fastai/batch_predicitions.html" class="nav-list-link">Batch Predictions</a></li><li class="nav-list-item "><a href="https://notes.hamel.dev/docs/fastai/01_fundamentals.html" class="nav-list-link">Book Chapters 1-4</a></li></ul></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Notes" aria-label="Search Notes" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            
              <li class="aux-nav-list-item">
                <a href="//github.com/hamelsmu/notes" class="site-button"
                  
                >
                  Edit On GitHub
                </a>
              </li>
            
          </ul>
        </nav>
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list">
              
                <li class="breadcrumb-nav-list-item"><a href="https://notes.hamel.dev/docs/linux/">Linux & Bash Scripting</a></li>
              
              <li class="breadcrumb-nav-list-item"><span>Cookbook</span></li>
            </ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">
        
          <h1 id="a-cookbook-of-shell-scripts---wicked-shell-scripts-2d-edition">
        
        
          <a href="#a-cookbook-of-shell-scripts---wicked-shell-scripts-2d-edition" class="anchor-heading" aria-labelledby="a-cookbook-of-shell-scripts---wicked-shell-scripts-2d-edition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A Cookbook of Shell Scripts - Wicked Shell Scripts, 2d Edition
        
        
      </h1>
    

<p>You should browse the table of contents of <a href="https://nostarch.com/wcss2">this book</a> and use the shell scripts contained within off the shelf if possible.</p>

<ul>
  <li>GitHub: https://github.com/hamelsmu/wicked_cool_shell_scripts_2e/</li>
  <li>Link to book on GitHub:  https://github.com/hamelsmu/wicked_cool_shell_scripts_2e/blob/master/WickedCoolShellScripts2E.pdf</li>
  <li>Book: https://nostarch.com/wcss2</li>
</ul>
      <h1 id="things-learned-from-the-cookbook">
        
        
          <a href="#things-learned-from-the-cookbook" class="anchor-heading" aria-labelledby="things-learned-from-the-cookbook"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Things Learned From The Cookbook
        
        
      </h1>
    
<p>In addition to just using the library of shell scripts,  I also learned the following bash tidbits from this book.</p>
      <h2 id="shift--and---pop-args-off-and-count-args">
        
        
          <a href="#shift--and---pop-args-off-and-count-args" class="anchor-heading" aria-labelledby="shift--and---pop-args-off-and-count-args"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="highlighter-rouge">shift</code>  and <code class="highlighter-rouge">$#</code>  pop args off and count args
        
        
      </h2>
    
<p>shift.sh</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="k">while</span> <span class="o">((</span> <span class="nv">$# </span><span class="o">))</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"process args: </span><span class="nv">$1</span><span class="s2">"</span>
    <span class="nb">shift
</span><span class="k">done</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p>Results in:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>$ ./shift.sh foo bar bash                                                                             
process args: foo
process args: bar
process args: bash
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h3 id="using-shift-for-cli-options">
        
        
          <a href="#using-shift-for-cli-options" class="anchor-heading" aria-labelledby="using-shift-for-cli-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using shift for CLI options:
        
        
      </h3>
    

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c"># newquota--A frontend to quota that works with full-word flags a la GNU</span>

<span class="c"># quota has three possible flags, -g, -v, and -q, but this script</span>
<span class="c">#   allows them to be '--group', '--verbose', and '--quiet' too:</span>

<span class="nv">flags</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">realquota</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>which quota<span class="si">)</span><span class="s2">"</span>

<span class="k">while</span> <span class="o">[</span> <span class="nv">$# </span><span class="nt">-gt</span> 0 <span class="o">]</span>
<span class="k">do
  case</span> <span class="nv">$1</span>
  <span class="k">in</span>
    <span class="nt">--help</span><span class="p">)</span>  <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> [--group --verbose --quiet -gvq]"</span> <span class="o">&gt;</span>&amp;2
                       <span class="nb">exit </span>1 <span class="p">;;</span>
    <span class="nt">--group</span> <span class="p">)</span>  <span class="nv">flags</span><span class="o">=</span><span class="s2">"</span><span class="nv">$flags</span><span class="s2"> -g"</span><span class="p">;</span>       <span class="nb">shift</span> <span class="p">;;</span>
    <span class="nt">--verbose</span><span class="p">)</span>  <span class="nv">flags</span><span class="o">=</span><span class="s2">"</span><span class="nv">$flags</span><span class="s2"> -v"</span><span class="p">;</span>   <span class="nb">shift</span> <span class="p">;;</span>
    <span class="nt">--quiet</span><span class="p">)</span>  <span class="nv">flags</span><span class="o">=</span><span class="s2">"</span><span class="nv">$flags</span><span class="s2"> -q"</span><span class="p">;</span>       <span class="nb">shift</span> <span class="p">;;</span>
    <span class="nt">--</span><span class="p">)</span>  <span class="nb">shift</span><span class="p">;</span>           <span class="nb">break</span> <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>  <span class="nb">break</span><span class="p">;</span>          <span class="c"># done with 'while' loop!</span>
  <span class="k">esac
done

</span><span class="nb">exec</span> <span class="nv">$realquota</span> <span class="nv">$flags</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>

</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="-collect-all-arguments">
        
        
          <a href="#-collect-all-arguments" class="anchor-heading" aria-labelledby="-collect-all-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="highlighter-rouge">$*</code> collect all arguments
        
        
      </h2>
    
<p>shift2.sh</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="k">for </span>var <span class="k">in</span> <span class="nv">$*</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo</span> <span class="nv">$var</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p>Results in:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>$ ./shift2.sh foo bar bash                                                                             
process args: foo
process args: bar
process args: bash
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="multi-option-case-statement">
        
        
          <a href="#multi-option-case-statement" class="anchor-heading" aria-labelledby="multi-option-case-statement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Multi Option Case Statement
        
        
      </h2>
    
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="k">while </span><span class="nb">read command </span>args
<span class="k">do
  case</span> <span class="nv">$command</span>
  <span class="k">in
    </span>quit|exit<span class="p">)</span> <span class="nb">exit </span>0                                  <span class="p">;;</span>
    <span class="nb">help</span><span class="p">|</span><span class="se">\?</span><span class="p">)</span>   show_help                               <span class="p">;;</span>
    scale<span class="p">)</span>     <span class="nv">scale</span><span class="o">=</span><span class="nv">$args</span>                             <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>         scriptbc <span class="nt">-p</span> <span class="nv">$scale</span> <span class="s2">"</span><span class="nv">$command</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$args</span><span class="s2">"</span>  <span class="p">;;</span>
  <span class="k">esac</span>

  /bin/echo <span class="nt">-n</span> <span class="s2">"calc&gt; "</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h3 id="another-example-of-case-statement">
        
        
          <a href="#another-example-of-case-statement" class="anchor-heading" aria-labelledby="another-example-of-case-statement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Another example of case statement
        
        
      </h3>
    

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>  <span class="k">case</span> <span class="nv">$1</span> <span class="k">in
    </span>1 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Jan"</span>    <span class="p">;;</span>  2 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Feb"</span>    <span class="p">;;</span>
    3 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Mar"</span>    <span class="p">;;</span>  4 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Apr"</span>    <span class="p">;;</span>
    5 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"May"</span>    <span class="p">;;</span>  6 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Jun"</span>    <span class="p">;;</span>
    7 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Jul"</span>    <span class="p">;;</span>  8 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Aug"</span>    <span class="p">;;</span>
    9 <span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Sep"</span>    <span class="p">;;</span>  10<span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Oct"</span>    <span class="p">;;</span>
    11<span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Nov"</span>    <span class="p">;;</span>  12<span class="p">)</span> <span class="nv">month</span><span class="o">=</span><span class="s2">"Dec"</span>    <span class="p">;;</span>
    <span class="k">*</span> <span class="p">)</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">: Unknown numeric month value </span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1
  <span class="k">esac
  return </span>0

</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="collecting-stdout-with--">
        
        
          <a href="#collecting-stdout-with--" class="anchor-heading" aria-labelledby="collecting-stdout-with--"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Collecting stdout with <code class="highlighter-rouge">-</code>
        
        
      </h2>
    

<p><code class="highlighter-rouge">echo "Enter something: " | cat -</code></p>
      <h2 id="formatting-long-lines-fmt">
        
        
          <a href="#formatting-long-lines-fmt" class="anchor-heading" aria-labelledby="formatting-long-lines-fmt"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Formatting Long Lines <code class="highlighter-rouge">fmt</code>
        
        
      </h2>
    
<p>Will make lines no longer than 30 characters, not cutting off any words.</p>

<p><code class="highlighter-rouge">fmt -w30 long_text.txt</code></p>
      <h2 id="ifs---internal-field-seperator">
        
        
          <a href="#ifs---internal-field-seperator" class="anchor-heading" aria-labelledby="ifs---internal-field-seperator"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IFS - Internal Field Seperator
        
        
      </h2>
    
<p>Sets the internal delimiter</p>

<p>ifs_variable.sh</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">IFS</span><span class="o">=</span><span class="s2">":"</span>
<span class="nv">var</span><span class="o">=</span><span class="s1">'a:b-c~d'</span>
<span class="k">for </span>n <span class="k">in</span> <span class="nv">$var</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$n</span><span class="s2">"</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p>Results in</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>$ ./1/ifs_variable.sh
a
b-c~d
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h3 id="ifs-in-great-expectations-action">
        
        
          <a href="#ifs-in-great-expectations-action" class="anchor-heading" aria-labelledby="ifs-in-great-expectations-action"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IFS in Great Expectations Action
        
        
      </h3>
    

<p>I’m using this in the <a href="https://github.com/superconductive/great_expectations_action">Great Expectations Action</a> to parse a list of arguments given as a string to an input</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># Loop through checkpoints</span>
<span class="nv">STATUS</span><span class="o">=</span>0
<span class="nv">IFS</span><span class="o">=</span><span class="s1">','</span>
<span class="k">for </span>c <span class="k">in</span> <span class="nv">$INPUT_CHECKPOINTS</span><span class="p">;</span><span class="k">do
    </span><span class="nb">echo</span> <span class="s2">""</span>
    <span class="nb">echo</span> <span class="s2">"Validating Checkpoint: </span><span class="k">${</span><span class="nv">c</span><span class="k">}</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">!</span> great_expectations checkpoint run <span class="nv">$c</span><span class="p">;</span> <span class="k">then
        </span><span class="nv">STATUS</span><span class="o">=</span>1
    <span class="k">fi
done</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h3 id="ifs-for-iterating-through-path">
        
        
          <a href="#ifs-for-iterating-through-path" class="anchor-heading" aria-labelledby="ifs-for-iterating-through-path"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IFS for iterating through $PATH
        
        
      </h3>
    

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">IFS</span><span class="o">=</span><span class="s2">":"</span>
<span class="k">for </span>directory <span class="k">in</span> <span class="nv">$PATH</span> <span class="p">;</span> <span class="k">do
   </span><span class="nb">echo</span> <span class="nv">$directory</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h3 id="ifs-double-vs-single-quotes">
        
        
          <a href="#ifs-double-vs-single-quotes" class="anchor-heading" aria-labelledby="ifs-double-vs-single-quotes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IFS: Double vs. Single Quotes
        
        
      </h3>
    

<p>With double quotes the outcome of the command expansion would be fed as one parameter to the source command. Without quotes it would be broken up into multiple parameters, depending on the value of IFS which contains space, TAB and newline by default.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nv">var</span><span class="o">=</span><span class="s2">"some value"</span>

<span class="c"># $var fed into cmd as one parameter</span>
cmd <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span>

<span class="c"># $var is fed into cmd as two parameters</span>
<span class="c">#  delimted by the default IFS character, space</span>
cmd <span class="s1">'$var'</span>

</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="random">
        
        
          <a href="#random" class="anchor-heading" aria-labelledby="random"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> $RANDOM
        
        
      </h2>
    
<p><code class="highlighter-rouge">echo $RANDOM</code> will print out a random number</p>
      <h2 id="debugging-shell-scripts--x">
        
        
          <a href="#debugging-shell-scripts--x" class="anchor-heading" aria-labelledby="debugging-shell-scripts--x"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Debugging Shell Scripts <code class="highlighter-rouge">-x</code>
        
        
      </h2>
    

<p>Debug a script:</p>

<p><code class="highlighter-rouge">bash -x myscript.sh</code></p>

<p>OR, within a script:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">set</span> <span class="nt">-x</span> <span class="c"># start debugging</span>
./myscript.sh
<span class="nb">set</span> +x <span class="c"># stop debugging</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p>All variables will be substituted and lines that are run will be printed to screen, showing the control flow of the program</p>
      <h2 id="sourcing-files-with--">
        
        
          <a href="#sourcing-files-with--" class="anchor-heading" aria-labelledby="sourcing-files-with--"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sourcing files with <code class="highlighter-rouge">. </code>
        
        
      </h2>
    

<p>So you can “import” scripts</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">.</span> myscript.sh
<span class="c"># is equivalent to</span>
<span class="nb">source </span>myscript.sh
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="using-functions-to-set-exit-codes">
        
        
          <a href="#using-functions-to-set-exit-codes" class="anchor-heading" aria-labelledby="using-functions-to-set-exit-codes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using functions to set exit codes
        
        
      </h2>
    

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>
validAlphaNum<span class="o">()</span>
<span class="o">{</span>
  <span class="c"># Validate arg: returns 0 if all upper+lower+digits, 1 otherwise.</span>
  <span class="c"># Remove all unacceptable chars.</span>
  <span class="nv">validchars</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$1</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/[^[:alnum:]]//g'</span><span class="si">)</span><span class="s2">"</span>

  <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$validchars</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then
    return </span>0
  <span class="k">else
    return </span>1
  <span class="k">fi</span>
<span class="o">}</span>

<span class="nb">exit </span>validAlphaNum

</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="know-if-someone-running-the-script-directly-with--bash_source">
        
        
          <a href="#know-if-someone-running-the-script-directly-with--bash_source" class="anchor-heading" aria-labelledby="know-if-someone-running-the-script-directly-with--bash_source"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Know if someone running the script directly with  <code class="highlighter-rouge">$BASH_SOURCE</code>
        
        
      </h2>
    
<p>The variable <code class="highlighter-rouge">$BASH_SOURCE</code> can let you differentiate between when a script is run standalone vs when its invoked from another script:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$BASH_SOURCE</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> <span class="o">]</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
      <h2 id="xargs">
        
        
          <a href="#xargs" class="anchor-heading" aria-labelledby="xargs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="highlighter-rouge">xargs</code>
        
        
      </h2>
    

<p>https://www.cyberciti.biz/faq/linux-unix-bsd-xargs-construct-argument-lists-utility/</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">echo </span>1 2 3 4 | xargs <span class="nt">-n2</span> <span class="nt">-I</span> <span class="o">{}</span> <span class="nb">echo </span>hello <span class="o">{}</span> world                                                                                                                                                                                                                                                   
hello 1 2 world
hello 3 4 world

</pre></td></tr></tbody></table></div></code></pre></div></div>

        

        

        
        
          <hr>
          <footer>
            

            <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2020 onwards, Hamel Husain.</p>

            
              <div class="d-flex mt-2">
                
                
                  <p class="text-small text-grey-dk-000 mb-0">
                    <a href="https://github.com/hamelsmu/notes/tree/master/docs/linux/cookbook.md" id="edit-this-page">Edit on GitHub.</a>
                  </p>
                
              </div>
            
          </footer>
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
</body>
</html>


